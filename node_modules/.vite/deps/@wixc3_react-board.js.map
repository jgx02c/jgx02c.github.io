{
  "version": 3,
  "sources": ["../../@wixc3/board-core/src/create-metadata.ts", "../../@wixc3/board-core/src/hooks.ts", "../../@wixc3/board-core/src/setup-stage.tsx", "../../@wixc3/board-core/src/create-renderable-base.ts", "../../@wixc3/board-core/src/types.ts", "../../@wixc3/board-core/src/index.ts", "../../@wixc3/react-board/src/react-error-handled-render.tsx", "../../@wixc3/react-board/src/create-board.tsx", "../../@wixc3/react-board/dist/types.js", "../../@wixc3/react-board/src/index.ts"],
  "sourcesContent": ["import type { HookMap, IGeneralMetadata } from './types';\n\nexport type OmitGeneralMetadata<DATA extends IGeneralMetadata<HookMap>> = Omit<DATA, '__hooks'>;\n\nexport function createMetadata<DATA extends IGeneralMetadata<HookMap>>(metadata: OmitGeneralMetadata<DATA>): DATA {\n    return metadata as DATA;\n}\n", "import type { IGeneralMetadata, PluginInfo, Plugin, HookMap, HOOK } from './types';\n\nexport type HookNames<DATA extends IGeneralMetadata<HookMap>> = keyof NonNullable<DATA['__hooks']> & string;\n\nexport function getPluginsWithHooks<DATA extends IGeneralMetadata<HookMap>>(\n    data: DATA,\n    hookName: HookNames<DATA>\n): PluginInfo<unknown, DATA, Plugin<unknown, DATA>>[] {\n    if (!data.plugins) {\n        return [];\n    }\n    return data.plugins.filter((item) => !!(item.key.plugin as HookMap)[hookName]) as PluginInfo<\n        unknown,\n        DATA,\n        Plugin<unknown, DATA>\n    >[];\n}\n\nexport type HookParams<DATA extends IGeneralMetadata<HookMap>, HOOK extends HookNames<DATA>> = NonNullable<\n    NonNullable<DATA['__hooks']>[HOOK]\n> extends (pluginParams: never, ...args: infer U) => unknown\n    ? U\n    : never;\n\nexport function callHooks<DATA extends IGeneralMetadata<HookMap>, HOOKNAME extends HookNames<DATA>>(\n    data: DATA,\n    hookName: HOOKNAME,\n    ...props: HookParams<DATA, HOOKNAME>\n): void {\n    const plugins = getPluginsWithHooks(data, hookName);\n    for (const pluginInfo of plugins) {\n        if ((pluginInfo.key.plugin as HookMap)[hookName]) {\n            (\n                (pluginInfo.key.plugin as HookMap)[hookName] as unknown as HOOK<\n                    unknown,\n                    HookParams<DATA, HOOKNAME>,\n                    void\n                >\n            )(pluginInfo.props as never, ...props);\n        }\n    }\n}\n", "import { callHooks } from './hooks';\nimport type { BoardSetupStageFunction, IWindowEnvironmentProps, ICanvasEnvironmentProps, CanvasStyles } from './types';\n\nexport const defaultWindowStyles = {\n    width: 1024,\n    height: 640,\n} as const;\n\nexport const defaultCanvasStyles: CanvasStyles = {\n    width: 'fit-content',\n    height: 'fit-content',\n    marginLeft: 'auto',\n    marginRight: 'auto',\n    marginBottom: 'auto',\n    marginTop: 'auto',\n    paddingLeft: '0px',\n    paddingRight: '0px',\n    paddingBottom: '0px',\n    paddingTop: '0px',\n} as const;\n\nexport const defaultEnvironmentProperties = {\n    windowWidth: defaultWindowStyles.width,\n    windowHeight: defaultWindowStyles.height,\n    canvasMargin: {},\n    canvasPadding: {},\n};\n\nconst applyStylesToWindow = (windowStyles: IWindowEnvironmentProps = {}, previousProps: IWindowEnvironmentProps) => {\n    // we revert the changes to previous values when running cleanup\n    previousProps.windowHeight = previousProps.windowHeight ? window.outerHeight : defaultWindowStyles.height;\n    previousProps.windowWidth = previousProps.windowWidth ? window.outerWidth : defaultWindowStyles.width;\n\n    window.resizeTo(\n        windowStyles.windowWidth || previousProps.windowWidth,\n        windowStyles.windowHeight || previousProps.windowHeight\n    );\n\n    document.body.style.backgroundColor = windowStyles.windowBackgroundColor || '';\n};\n\nconst applyStylesToCanvas = (canvas: HTMLDivElement, environmentProps: ICanvasEnvironmentProps = {}) => {\n    const canvasStyle = {\n        width: environmentProps.canvasWidth ? `${environmentProps.canvasWidth}px` : defaultCanvasStyles.width,\n        height: environmentProps.canvasHeight ? `${environmentProps.canvasHeight}px` : defaultCanvasStyles.height,\n        marginLeft: environmentProps.canvasMargin?.left\n            ? `${environmentProps.canvasMargin?.left}px`\n            : defaultCanvasStyles.marginLeft,\n        marginRight: environmentProps.canvasMargin?.right\n            ? `${environmentProps.canvasMargin?.right}px`\n            : defaultCanvasStyles.marginRight,\n        marginBottom: environmentProps.canvasMargin?.bottom\n            ? `${environmentProps.canvasMargin?.bottom}px`\n            : defaultCanvasStyles.marginBottom,\n        marginTop: environmentProps.canvasMargin?.top\n            ? `${environmentProps.canvasMargin?.top}px`\n            : defaultCanvasStyles.marginTop,\n        paddingLeft: environmentProps.canvasPadding?.left\n            ? `${environmentProps.canvasPadding?.left}px`\n            : defaultCanvasStyles.paddingLeft,\n        paddingRight: environmentProps.canvasPadding?.right\n            ? `${environmentProps.canvasPadding?.right}px`\n            : defaultCanvasStyles.paddingRight,\n        paddingBottom: environmentProps.canvasPadding?.bottom\n            ? `${environmentProps.canvasPadding?.bottom}px`\n            : defaultCanvasStyles.paddingBottom,\n        paddingTop: environmentProps.canvasPadding?.top\n            ? `${environmentProps.canvasPadding?.top}px`\n            : defaultCanvasStyles.paddingTop,\n        backgroundColor: environmentProps.canvasBackgroundColor || '',\n    };\n\n    // Canvas gets stretched horizontally/vertically\n    // when horizontal (left and right) or vertical (top and bottom) margins are applied.\n    if (environmentProps.canvasMargin?.left !== undefined && environmentProps.canvasMargin.right !== undefined) {\n        canvasStyle.width = '100%';\n    }\n\n    if (environmentProps.canvasMargin?.top !== undefined && environmentProps.canvasMargin.bottom !== undefined) {\n        canvasStyle.height = 'auto';\n    }\n\n    Object.assign(canvas.style, canvasStyle);\n};\n\nexport const setupBoardStage: BoardSetupStageFunction = (board, parentElement) => {\n    const previousWindowEnvironmentProps: IWindowEnvironmentProps = {};\n    const canvas = document.createElement('div');\n    canvas.setAttribute('id', 'board-canvas');\n\n    const { environmentProps } = board;\n\n    applyStylesToWindow(environmentProps, previousWindowEnvironmentProps);\n    applyStylesToCanvas(canvas, environmentProps);\n\n    callHooks(board, 'beforeAppendCanvas', canvas);\n\n    parentElement.appendChild(canvas);\n\n    const updateCanvas = (canvasEnvironmentProps: ICanvasEnvironmentProps) => {\n        applyStylesToCanvas(canvas, canvasEnvironmentProps);\n    };\n\n    const updateWindow = (windowEnvironmentProps: IWindowEnvironmentProps) => {\n        applyStylesToWindow(windowEnvironmentProps, previousWindowEnvironmentProps);\n    };\n\n    const cleanup = () => {\n        callHooks(board, 'beforeStageCleanUp', canvas);\n        canvas.remove();\n\n        if (previousWindowEnvironmentProps.windowWidth && previousWindowEnvironmentProps.windowHeight) {\n            window.resizeTo(previousWindowEnvironmentProps.windowWidth, previousWindowEnvironmentProps.windowHeight);\n        }\n    };\n\n    return { canvas, updateCanvas, updateWindow, cleanup };\n};\n", "import type { IRenderableMetadataBase } from './types';\nimport { createMetadata, OmitGeneralMetadata } from './create-metadata';\nimport { setupBoardStage } from './setup-stage';\nimport { callHooks } from './hooks';\n\nexport type OmitIRenderableMetadataBase<DATA extends IRenderableMetadataBase> = Omit<\n    OmitGeneralMetadata<DATA>,\n    'setupStage' | 'cleanupStage'\n>;\n\nexport async function baseRender<DATA extends IRenderableMetadataBase>(\n    data: DATA,\n    render: (target: HTMLElement) => Promise<() => void>,\n    canvas: HTMLElement\n): Promise<() => void> {\n    callHooks<IRenderableMetadataBase, 'beforeRender'>(data, 'beforeRender', canvas);\n    const cleanup = await render(canvas);\n    callHooks<IRenderableMetadataBase, 'afterRender'>(data, 'afterRender', canvas);\n    return cleanup;\n}\n\nexport function createRenderableBase<DATA extends IRenderableMetadataBase>(\n    data: OmitIRenderableMetadataBase<DATA>\n): DATA {\n    const res: DATA = createMetadata({\n        ...data,\n        setupStage(parentElement = document.body) {\n            return setupBoardStage(this, parentElement);\n        },\n    } as DATA);\n    return res;\n}\n", "export type LayoutSize = number | undefined | null;\n\nexport type LayoutSizeWithAuto = LayoutSize | 'auto';\n\nexport interface LayoutSpacing {\n    /** @visualizer spacing */\n    top?: LayoutSize | undefined;\n    /** @visualizer spacing */\n    right?: LayoutSize | undefined;\n    /** @visualizer spacing */\n    bottom?: LayoutSize | undefined;\n    /** @visualizer spacing */\n    left?: LayoutSize | undefined;\n}\n\nexport type IPreviewEnvironmentPropsBase = IWindowEnvironmentProps & ICanvasEnvironmentProps;\n\nexport interface IWindowEnvironmentProps {\n    /** @visualizer spacing */\n    windowWidth?: number | undefined;\n    /** @visualizer spacing */\n    windowHeight?: number | undefined;\n    /** @visualizer color */\n    windowBackgroundColor?: string | undefined;\n}\n\nexport interface ICanvasEnvironmentProps {\n    /** @visualizer spacing */\n    canvasWidth?: LayoutSizeWithAuto | undefined;\n    /** @visualizer spacing */\n    canvasHeight?: LayoutSizeWithAuto | undefined;\n    /** @visualizer color */\n    canvasBackgroundColor?: string | undefined;\n    /** @visualizer canvasMargin */\n    canvasMargin?: LayoutSpacing | undefined;\n    /** @visualizer canvasPadding */\n    canvasPadding?: LayoutSpacing | undefined;\n}\n\nexport type HOOK<PLUGINPARAMS, HOOKPARAMS extends unknown[], RES> = (\n    params: PLUGINPARAMS,\n    ...hookParams: HOOKPARAMS\n) => RES;\n\nexport interface HookMap<PLUGINPARAMS = never> {\n    [hookName: string]: HOOK<PLUGINPARAMS, never[], unknown> | undefined;\n}\n\nexport interface ISetupController {\n    addScript(scriptUrl: string): Promise<void>;\n    addStylesheet(stylesheetUrl: string): Promise<void>;\n}\n\nexport type BoardSetupFunction = (controller: ISetupController) => void | Promise<void>;\n\nexport interface Plugin<PLUGINPARAMS, TARGET extends IGeneralMetadata<HookMap>> {\n    pluginName: string;\n    defaultProps: Partial<PLUGINPARAMS>;\n    plugin: TARGET['__hooks'];\n    use: (props: PLUGINPARAMS) => PluginInfo<PLUGINPARAMS, TARGET, Plugin<PLUGINPARAMS, TARGET>>;\n    /** for  use in WCS */\n    merge: (pluginProps: PLUGINPARAMS[]) => PLUGINPARAMS[];\n}\n\nexport interface PluginInfo<\n    PLUGINPARAMS,\n    TARGET extends IGeneralMetadata<HookMap>,\n    SYMB extends Plugin<PLUGINPARAMS, TARGET>\n> {\n    key: SYMB;\n    props: PLUGINPARAMS;\n}\n\nexport type ReplaceParams<MAP extends HookMap, PARAMS> = {\n    [hookname in keyof MAP]: NonNullable<MAP[hookname]> extends (\n        pProps: never,\n        ...params: infer HOOKPARAMS\n    ) => infer RES\n        ? HOOK<PARAMS, HOOKPARAMS, RES>\n        : never;\n};\nexport const defaultMerge = <T>(props: T[]): T[] => [\n    props.reduceRight((acc, curr) => {\n        return { ...acc, ...curr };\n    }),\n];\nexport const createPlugin =\n    <TARGET extends IGeneralMetadata<HookMap> = IGeneralMetadata<HookMap>>() =>\n    <PluginProps>(\n        pluginName: string,\n        defaultProps: Partial<PluginProps>,\n        plugin: ReplaceParams<NonNullable<TARGET['__hooks']>, PluginProps>,\n        merge: (params: PluginProps[]) => PluginProps[] = defaultMerge\n    ): Plugin<PluginProps, TARGET> => {\n        const res: Plugin<PluginProps, TARGET> = {\n            pluginName,\n            defaultProps,\n            plugin,\n            use: (props) => {\n                return {\n                    key: res as unknown as Plugin<PluginProps, TARGET>,\n                    props: { ...defaultProps, ...props } as PluginProps,\n                };\n            },\n            merge,\n        };\n        return res;\n    };\n\n/** Describe entities in your project. */\nexport interface IGeneralMetadata<HOOKS extends HookMap = HookMap> {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    plugins?: PluginInfo<unknown, this, Plugin<any, this>>[] | undefined;\n    __hooks?: HOOKS | undefined;\n}\n\nexport interface IRenderableLifeCycleHooks<PLUGINPARAMS = never> extends HookMap<PLUGINPARAMS> {\n    beforeAppendCanvas?(props: PLUGINPARAMS, canvas: HTMLElement): void;\n    beforeStageCleanUp?(props: PLUGINPARAMS, canvas: HTMLElement): void;\n    beforeRender?(pluginProps: PLUGINPARAMS, canvas: HTMLElement): void;\n    afterRender?(props: PLUGINPARAMS, canvas: HTMLElement): void;\n}\n\nexport interface IRenderableMetadataBase<HOOKS extends HookMap = HookMap>\n    extends IGeneralMetadata<HOOKS & IRenderableLifeCycleHooks> {\n    /**\n     * Renders the Renderable into an html element\n     *\n     * @returns a cleanup function\n     */\n    render: (targetElement: HTMLElement) => Promise<() => void>;\n    /**\n     * sets the stage for the renderer.\n     * this function has many side effects ( such as effecting window styles and sizes )\n     *\n     * @returns canvas an html element for rendering into, cleanup a method for cleaning up the side-effects\n     *\n     */\n    setupStage: (parentElement?: HTMLElement) => ReturnType<BoardSetupStageFunction>;\n\n    /**\n     * Board's environment properties (e.g. the window size, the component alignment, etc.)\n     */\n    environmentProps?: IPreviewEnvironmentPropsBase | undefined;\n    /**\n     * Functions for setting up the page for the board: adding global styles,\n     * scripts, etc. These functions run only once before the board is mounted.\n     */\n    setup?: BoardSetupFunction | BoardSetupFunction[] | undefined;\n}\n\nexport type BoardSetupStageFunction = (\n    board: IRenderableMetadataBase,\n    parentElement: HTMLElement\n) => {\n    canvas: HTMLElement;\n    cleanup: () => void;\n    updateCanvas: (canvasEnvironmentProps: ICanvasEnvironmentProps) => void;\n    updateWindow: (windowEnvironmentProps: IWindowEnvironmentProps) => void;\n};\n\nexport type CanvasStyles = Pick<\n    CSSStyleDeclaration,\n    | 'height'\n    | 'width'\n    | 'paddingLeft'\n    | 'paddingRight'\n    | 'paddingBottom'\n    | 'paddingTop'\n    | 'marginLeft'\n    | 'marginRight'\n    | 'marginBottom'\n    | 'marginTop'\n>;\n", "export * from './create-metadata';\nexport * from './create-renderable-base';\nexport * from './setup-stage';\nexport * from './hooks';\nexport * from './types';\n", "import React from 'react';\nimport ReactDOM from 'react-dom';\nimport ReactDOMClient from 'react-dom/client';\n\nconst reactRootByContainer = new WeakMap<HTMLElement, ReactDOMClient.Root>();\n\nexport const reactErrorHandledRendering = async (element: React.ReactElement, container: HTMLElement) => {\n    if (ReactDOMClient.createRoot) {\n        // react 18+\n        const reactRoot = reactRootByContainer.get(container) || ReactDOMClient.createRoot(container);\n        reactRootByContainer.set(container, reactRoot);\n\n        const cleanup = () => {\n            reactRoot?.unmount();\n            reactRootByContainer.delete(container);\n        };\n\n        try {\n            await new Promise<void>((resolve, reject) => {\n                reactRoot?.render(\n                    <ErrorBoundary onRender={resolve} reportError={reject}>\n                        {element}\n                    </ErrorBoundary>\n                );\n            });\n        } catch (e) {\n            cleanup();\n            throw e;\n        }\n\n        return cleanup;\n    } else {\n        // react <18\n        // eslint-disable-next-line react/no-deprecated\n        const cleanup = () => ReactDOM.unmountComponentAtNode(container);\n\n        try {\n            await new Promise<void>((resolve, reject) => {\n                // eslint-disable-next-line react/no-deprecated\n                ReactDOM.render(<ErrorBoundary reportError={reject}>{element}</ErrorBoundary>, container, resolve);\n            });\n        } catch (e) {\n            /**\n             * If an error occurs during ReactDOM.render(), React 17 will keep\n             * _reactRootContainer property attached to the container DOM node.\n             * This property points to an a stale fiber object, which prevents\n             * subsequent ReactDOM.render() calls from working.\n             */\n            cleanup();\n            throw e;\n        }\n\n        return cleanup;\n    }\n};\n\ninterface ErrorBoundryProps {\n    onRender?(): void;\n    reportError?(error: unknown, errorInfo: React.ErrorInfo): void;\n}\n\nclass ErrorBoundary extends React.Component<React.PropsWithChildren<ErrorBoundryProps>, { hasError: boolean }> {\n    public override state = { hasError: false };\n    static getDerivedStateFromError() {\n        return { hasError: true };\n    }\n    public override componentDidCatch(error: unknown, errorInfo: React.ErrorInfo) {\n        this.props.reportError?.(error, errorInfo);\n    }\n    public override componentDidMount() {\n        if (!this.state.hasError) {\n            this.props.onRender?.();\n        }\n    }\n    public override componentDidUpdate() {\n        if (!this.state.hasError) {\n            this.props.onRender?.();\n        }\n    }\n    public override render() {\n        return this.state.hasError ? null : this.props.children;\n    }\n}\n", "import React from 'react';\nimport { getPluginsWithHooks, baseRender, createRenderableBase } from '@wixc3/board-core';\nimport { reactErrorHandledRendering } from './react-error-handled-render';\nimport type { IReactBoard, OmitReactBoard } from './types';\n\nexport function createBoard(input: OmitReactBoard<IReactBoard>): IReactBoard {\n    const res: IReactBoard = createRenderableBase<IReactBoard>({\n        ...input,\n        render(target) {\n            return baseRender(\n                res,\n                async () => {\n                    let element = <res.Board />;\n                    const wrapRenderPlugins = getPluginsWithHooks(res, 'wrapRender');\n                    for (const plugin of wrapRenderPlugins) {\n                        if (plugin.key.plugin?.wrapRender) {\n                            const el = plugin.key.plugin.wrapRender(plugin.props as never, res, element, target);\n                            element = el || element;\n                        }\n                    }\n                    return reactErrorHandledRendering(element, target);\n                },\n                target\n            );\n        },\n    });\n    return res;\n}\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=types.js.map", "export * from './create-board';\nexport * from './types';\n"],
  "mappings": "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",
  "names": ["require_types"]
}
